#!/usr/bin/env python3
"""
è¯¦ç»†è§£é‡Š18ç»´ç‰¹å¾çš„æ„æˆ
"""

import numpy as np
import pandas as pd


def explain_feature_construction():
    """è¯¦ç»†è§£é‡Š18ç»´ç‰¹å¾å¦‚ä½•æ„æˆ"""
    print("=== 18ç»´ç‰¹å¾æ„æˆè¯¦è§£ ===\n")

    print("ğŸ“Š åŸºç¡€è¾“å…¥ç‰¹å¾ (12ç»´):")
    print("â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”")
    print("â”‚ ä½ç½®ç‰¹å¾ (6ç»´):                                            â”‚")
    print("â”‚   [p1, p2, p3, p4, p5, p6]                                â”‚")
    print("â”‚   å„å…³èŠ‚è§’åº¦å€¼ (å¼§åº¦)                                      â”‚")
    print("â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤")
    print("â”‚ é€Ÿåº¦ç‰¹å¾ (6ç»´):                                            â”‚")
    print("â”‚   [v1, v2, v3, v4, v5, v6]                                â”‚")
    print("â”‚   å„å…³èŠ‚è§’é€Ÿåº¦å€¼ (å¼§åº¦/ç§’)                                 â”‚")
    print("â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜\n")

    print("ğŸ”§ Joint 1 å¢å¼ºç‰¹å¾ (6ç»´):")
    print("â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”")
    print("â”‚ 1. ä½ç½®å¹³æ–¹:     p1Â²                                        â”‚")
    print("â”‚    ä½œç”¨: æ•è·éçº¿æ€§å…³ç³»ï¼Œç‰¹åˆ«æ˜¯é‡åŠ›è¡¥å¿ä¸­çš„äºŒæ¬¡æ•ˆåº”         â”‚")
    print("â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤")
    print("â”‚ 2. é€Ÿåº¦å¹³æ–¹:     v1Â²                                        â”‚")
    print("â”‚    ä½œç”¨: æ•è·é€Ÿåº¦ç›¸å…³çš„éçº¿æ€§æ•ˆåº”ï¼Œå¦‚ç¦»å¿ƒåŠ›                 â”‚")
    print("â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤")
    print("â”‚ 3. ä½ç½®Ã—é€Ÿåº¦:   p1 Ã— v1                                    â”‚")
    print("â”‚    ä½œç”¨: æ•è·ä½ç½®å’Œé€Ÿåº¦çš„è€¦åˆæ•ˆåº”                           â”‚")
    print("â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤")
    print("â”‚ 4. sin(ä½ç½®):    sin(p1)                                   â”‚")
    print("â”‚    ä½œç”¨: æ•è·è§’åº¦çš„å‘¨æœŸæ€§ç‰¹å¾ï¼Œå¯¹æ—‹è½¬å…³èŠ‚ç‰¹åˆ«é‡è¦           â”‚")
    print("â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤")
    print("â”‚ 5. cos(ä½ç½®):    cos(p1)                                   â”‚")
    print("â”‚    ä½œç”¨: ä¸sinäº’è¡¥ï¼Œæä¾›å®Œæ•´çš„è§’åº¦ä¿¡æ¯                     â”‚")
    print("â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤")
    print("â”‚ 6. é€Ÿåº¦æ–¹å‘:    sign(v1)                                   â”‚")
    print("â”‚    ä½œç”¨: æ•è·è¿åŠ¨æ–¹å‘ä¿¡æ¯                                   â”‚")
    print("â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜\n")

    print("ğŸ“‹ å®Œæ•´ç‰¹å¾åˆ—è¡¨ (18ç»´):")
    features = [
        # åŸºç¡€ä½ç½®ç‰¹å¾ (1-6)
        "p1", "p2", "p3", "p4", "p5", "p6",
        # åŸºç¡€é€Ÿåº¦ç‰¹å¾ (7-12)
        "v1", "v2", "v3", "v4", "v5", "v6",
        # Joint 1 å¢å¼ºç‰¹å¾ (13-18)
        "p1Â²", "v1Â²", "p1Ã—v1", "sin(p1)", "cos(p1)", "sign(v1)"
    ]

    print("â”Œâ”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”")
    print("â”‚ ç´¢å¼• â”‚ ç‰¹å¾åç§°        â”‚ è¯´æ˜                                 â”‚")
    print("â”œâ”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤")
    for i, feature in enumerate(features):
        if i < 6:
            category = "åŸºç¡€ä½ç½®"
        elif i < 12:
            category = "åŸºç¡€é€Ÿåº¦"
        else:
            category = "Joint 1 å¢å¼º"
        print(f"â”‚ {i+1:2d}  â”‚ {feature:<15} â”‚ {category:<25} â”‚")
    print("â””â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜\n")

    print("ğŸ¯ ä¸ºä»€ä¹ˆåªå¯¹Joint 1åšå¢å¼ºï¼Ÿ")
    print("â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”")
    print("â”‚ æ•°æ®åˆ†æç»“æœ:                                              â”‚")
    print("â”‚ â€¢ Joint 1 æ‰­çŸ©æ–¹å·®: 30.985 (æœ€å¤§)                         â”‚")
    print("â”‚ â€¢ Joint 6 æ‰­çŸ©æ–¹å·®: 0.021 (æœ€å°)                          â”‚")
    print("â”‚ â€¢ æ–¹å·®å·®å¼‚å€æ•°: 1510.8x                                    â”‚")
    print("â”‚ â€¢ Joint 1 æœ€éš¾å»ºæ¨¡ï¼Œéœ€è¦ç‰¹æ®Šå¤„ç†                           â”‚")
    print("â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜\n")

    print("âš¡ ç‰¹å¾å·¥ç¨‹çš„æ•ˆæœ:")
    print("â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”")
    print("â”‚ åŸå§‹æ¨¡å‹ (12ç»´ç‰¹å¾):                                       â”‚")
    print("â”‚ â€¢ Joint 1 RÂ² = -0.5011 (å®Œå…¨å¤±æ•ˆ)                         â”‚")
    print("â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤")
    print("â”‚ å¢å¼ºæ¨¡å‹ (18ç»´ç‰¹å¾):                                       â”‚")
    print("â”‚ â€¢ Joint 1 RÂ² = 0.5635 (æ˜¾è‘—æå‡)                          â”‚")
    print("â”‚ â€¢ æå‡: +1.0646 RÂ²                                       â”‚")
    print("â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜")


def demonstrate_feature_construction():
    """æ¼”ç¤ºç‰¹å¾æ„é€ è¿‡ç¨‹"""
    print("=== ç‰¹å¾æ„é€ æ¼”ç¤º ===\n")

    # æ¨¡æ‹Ÿè¾“å…¥æ•°æ®
    np.random.seed(42)
    positions = np.random.uniform(-np.pi, np.pi, (3, 6))  # 3ä¸ªæ ·æœ¬ï¼Œ6ä¸ªå…³èŠ‚
    velocities = np.random.uniform(-2, 2, (3, 6))       # 3ä¸ªæ ·æœ¬ï¼Œ6ä¸ªå…³èŠ‚

    print("ğŸ”¢ è¾“å…¥æ•°æ® (3ä¸ªæ ·æœ¬):")
    print("ä½ç½®:")
    print(positions)
    print("\né€Ÿåº¦:")
    print(velocities)

    # åŸºç¡€ç‰¹å¾
    base_features = np.concatenate([positions, velocities], axis=1)
    print(f"\nğŸ“Š åŸºç¡€ç‰¹å¾ (12ç»´): {base_features.shape}")
    print(base_features)

    # Joint 1 å¢å¼ºç‰¹å¾
    joint1_pos = positions[:, 0:1]
    joint1_vel = velocities[:, 0:1]

    enhanced = np.column_stack([
        joint1_pos ** 2,           # ä½ç½®å¹³æ–¹
        joint1_vel ** 2,           # é€Ÿåº¦å¹³æ–¹
        joint1_pos * joint1_vel,   # äº¤å‰é¡¹
        np.sin(joint1_pos),        # sin
        np.cos(joint1_pos),        # cos
        np.sign(joint1_vel)        # é€Ÿåº¦æ–¹å‘
    ])

    print(f"\nğŸ”§ Joint 1 å¢å¼ºç‰¹å¾ (6ç»´): {enhanced.shape}")
    print(enhanced)

    # å®Œæ•´ç‰¹å¾
    full_features = np.concatenate([base_features, enhanced], axis=1)
    print(f"\nğŸ¯ å®Œæ•´ç‰¹å¾ (18ç»´): {full_features.shape}")
    print(full_features)

    print(f"\nâœ… æˆåŠŸæ„é€  {full_features.shape[1]} ç»´ç‰¹å¾")


def main():
    """ä¸»å‡½æ•°"""
    explain_feature_construction()
    print("\n" + "="*60 + "\n")
    demonstrate_feature_construction()


if __name__ == "__main__":
    main()